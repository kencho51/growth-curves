<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Primary Meta Tags -->
    <title>Growth Chart Plotter - WHO/CDC & Hong Kong 2020 Standards | Height Percentile Calculator</title>
    <meta name="title" content="Growth Chart Plotter - WHO/CDC & Hong Kong 2020 Standards | Height Percentile Calculator">
    <meta name="description" content="Interactive growth chart tool for children 0-18 years. Plot height percentiles using WHO/CDC International or Hong Kong 2020 growth standards. Free online height percentile calculator for boys and girls.">
    <meta name="keywords" content="growth chart, height percentile, children growth, WHO growth standards, Hong Kong growth chart, pediatric growth, height calculator, child development, growth percentile calculator">
    <meta name="author" content="Growth Chart Tool">
    <meta name="robots" content="index, follow">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://growth-curves.superbrains.cc">
    <meta property="og:title" content="Growth Chart Plotter - WHO/CDC & Hong Kong 2020 Standards">
    <meta property="og:description" content="Interactive growth chart tool for children 0-18 years. Plot height percentiles using WHO/CDC International or Hong Kong 2020 growth standards.">
    <!-- <meta property="og:image" content="https://yourdomain.com/growth-chart-preview.png"> -->
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://yourdomain.com/">
    <meta property="twitter:title" content="Growth Chart Plotter - WHO/CDC & Hong Kong 2020 Standards">
    <meta property="twitter:description" content="Interactive growth chart tool for children 0-18 years. Plot height percentiles using WHO/CDC International or Hong Kong 2020 growth standards.">
    <!-- <meta property="twitter:image" content="https://yourdomain.com/growth-chart-preview.png"> -->
    
    <!-- Additional SEO Meta Tags -->
    <meta name="language" content="English">
    <meta name="revisit-after" content="7 days">
    <meta name="distribution" content="global">
    <meta name="rating" content="general">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://growth-curves.superbrains.cc">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    
    <!-- Schema.org Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "Growth Chart Plotter",
        "description": "Interactive growth chart tool for children 0-18 years using WHO/CDC International or Hong Kong 2020 growth standards",
        "url": "https://yourdomain.com/",
        "applicationCategory": "HealthApplication",
        "operatingSystem": "Any",
        "permissions": "none",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "USD"
        },
        "author": {
            "@type": "Organization",
            "name": "Growth Chart Tool"
        },
        "provider": {
            "@type": "Organization",
            "name": "Growth Chart Tool"
        },
        "inLanguage": "en",
        "isAccessibleForFree": true,
        "keywords": ["growth chart", "height percentile", "children growth", "WHO standards", "Hong Kong growth standards"],
        "about": {
            "@type": "MedicalCondition",
            "name": "Child Growth and Development"
        }
    }
    </script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        
        .container {
            background-color: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 30px;
        }
        
        .input-section {
            display: flex;
            gap: 20px;
            margin-bottom: 30px;
            flex-wrap: wrap;
            align-items: end;
        }
        
        .input-group {
            display: flex;
            flex-direction: column;
            min-width: 150px;
        }
        
        label {
            font-weight: bold;
            margin-bottom: 5px;
            color: #555;
        }
        
        input, select {
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
        }
        
        input:focus, select:focus {
            outline: none;
            border-color: #4CAF50;
        }
        
        button {
            padding: 10px 20px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            height: fit-content;
        }
        
        button:hover {
            background-color: #45a049;
        }
        
        .chart-container {
            position: relative;
            height: 600px;
            margin-top: 20px;
        }
        
        .info-box {
            background-color: #e8f5e8;
            padding: 15px;
            border-radius: 5px;
            margin-top: 20px;
            border-left: 4px solid #4CAF50;
        }
        
        .error {
            background-color: #ffebee;
            border-left-color: #f44336;
            color: #c62828;
        }
        
        .legend {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 15px;
            justify-content: center;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .legend-color {
            width: 20px;
            height: 3px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Growth Chart Plotter</h1>
            <p style="text-align: center; color: #666; margin-top: -15px; margin-bottom: 30px;">Interactive height percentile calculator for children 0-18 years using Hong Kong 2020 or WHO/CDC International growth standards</p>
        </header>
        
        <div class="input-section">
            <div class="input-group">
                <label for="standard">Growth Standard:</label>
                <select id="standard">
                    <option value="who_cdc">WHO/CDC International</option>
                    <option value="hk2020" selected>Hong Kong 2020</option>
                </select>
            </div>
            
            <div class="input-group">
                <label for="gender">Gender:</label>
                <select id="gender">
                    <option value="boy">Boy</option>
                    <option value="girl">Girl</option>
                </select>
            </div>
            
            <div class="input-group">
                <label for="age">Age (years):</label>
                <input type="number" id="age" min="0" max="18" step="0.1" placeholder="0-18">
            </div>
            
            <div class="input-group">
                <label for="height">Height (cm):</label>
                <input type="number" id="height" min="30" max="200" step="0.1" placeholder="30-200">
            </div>
            
            <button onclick="plotPoint()">Plot on Chart</button>
        </div>
        
        <div class="chart-container">
            <canvas id="growthChart"></canvas>
        </div>
        
        <div id="info" class="info-box" style="display: none;"></div>
        
        <div id="legend" class="legend">
            <!-- Legend will be populated dynamically -->
        </div>
        
        <section class="usage-guide" style="margin-top: 30px; padding: 20px; background-color: #f0f8ff; border-radius: 5px; border-left: 4px solid #007bff;">
            <h2 style="margin-top: 0; color: #333; font-size: 18px;">How to Use This Growth Chart Calculator</h2>
            <ol style="color: #555; line-height: 1.6;">
                <li><strong>Select Growth Standard:</strong> Choose between WHO/CDC International or Hong Kong 2020 standards</li>
                <li><strong>Choose Gender:</strong> Select boy or girl</li>
                <li><strong>Enter Age:</strong> Input age in years (0-18 years, accepts decimals like 5.5)</li>
                <li><strong>Enter Height:</strong> Input height in centimeters</li>
                <li><strong>Plot Point:</strong> Click "Plot on Chart" to see where your child's measurement falls on the growth curve</li>
            </ol>
        </section>

        <section class="info-section" style="margin-top: 20px; padding: 20px; background-color: #f8f9fa; border-radius: 5px; font-size: 14px;">
            <h3 style="margin-top: 0; color: #555;">Data Sources</h3>
                <p><strong>WHO/CDC International:</strong> Based on the WHO Child Growth Standards (2006) developed from the WHO Multicentre Growth Reference Study (1997-2003) conducted in 6 countries (Brazil, Ghana, India, Norway, Oman, USA). Represents optimal growth under ideal health conditions.</p>
                <p><strong>Hong Kong 2020:</strong> Based on the Hong Kong Growth Survey 2020-22 conducted by Chinese University of Hong Kong and University of Hong Kong. Represents growth patterns of contemporary Hong Kong children of Chinese ethnicity.</p>
                <p><em>Note: This is a tool for reference only. Always consult healthcare professionals for proper growth assessment and medical advice.</em></p>
            </div>

            <div class="disclaimer" style="background-color: #fff3cd; padding: 15px; border-radius: 4px; border-left: 4px solid #ffc107;">
                <h3 style="color: #856404; font-size: 16px; margin-top: 0; margin-bottom: 8px;">Important Medical Disclaimer</h3>
                <p style="color: #856404; margin-bottom: 0;"><em>This growth chart calculator is for reference and educational purposes only. It should not replace professional medical advice, diagnosis, or treatment. Always consult qualified healthcare professionals for proper growth assessment, medical advice, and any concerns about your child's development.</em></p>
            </div>
        </section>
    </div>

    <script>
        let chart;
        let userDataPoint = null;

        // Growth chart data from multiple standards
        // Note: Internal data is stored in months, but displayed as years on the chart
        
        // Sources:
        // WHO/CDC: WHO Child Growth Standards (2006) based on Multicentre Growth Reference Study
        //          Source: https://www.who.int/tools/child-growth-standards
        // HK2020: Hong Kong Growth Survey 2020-22, Chinese University of Hong Kong
        //         Source: https://www.cuhk.edu.hk/proj/hkgrowth/
        
        const growthData = {
            who_cdc: {
                boy: {
                    // Ages in months: 0, 3, 6, 12, 18, 24, 36, 48, 60, 72, 96, 120, 144, 168, 192, 216
                    // Equivalent years: 0, 0.25, 0.5, 1, 1.5, 2, 3, 4, 5, 6, 8, 10, 12, 14, 16, 18
                    ages: [0, 3, 6, 12, 18, 24, 36, 48, 60, 72, 96, 120, 144, 168, 192, 216],
                    percentiles: {
                        p3: [46.1, 57.3, 63.3, 71.0, 76.9, 81.7, 88.7, 94.9, 100.7, 106.1, 116.6, 126.6, 136.2, 145.4, 154.6, 163.2],
                        p10: [47.5, 59.0, 65.1, 73.2, 79.2, 84.1, 91.2, 97.6, 103.5, 109.0, 119.8, 130.0, 139.9, 149.3, 158.7, 167.5],
                        p25: [49.0, 60.8, 66.8, 75.1, 81.2, 86.2, 93.5, 100.0, 106.1, 111.7, 122.8, 133.0, 143.0, 152.6, 162.2, 171.2],
                        p50: [50.0, 62.1, 68.0, 76.1, 82.3, 87.1, 94.9, 101.6, 107.7, 113.5, 124.8, 135.4, 145.6, 155.4, 165.3, 174.5],
                        p75: [51.8, 64.4, 70.2, 78.8, 85.1, 90.0, 98.0, 104.9, 111.0, 116.9, 128.4, 139.0, 149.3, 159.4, 169.6, 179.0],
                        p90: [53.4, 66.1, 71.9, 80.8, 87.2, 92.2, 100.3, 107.5, 113.6, 119.6, 131.4, 142.0, 152.3, 162.7, 173.2, 182.9],
                        p97: [55.0, 67.8, 73.5, 82.5, 89.0, 94.1, 102.3, 109.7, 115.9, 121.9, 134.0, 144.7, 155.0, 165.7, 176.5, 186.4]
                    }
                },
                girl: {
                    ages: [0, 3, 6, 12, 18, 24, 36, 48, 60, 72, 96, 120, 144, 168, 192, 216],
                    percentiles: {
                        p3: [45.4, 56.1, 61.8, 68.9, 74.9, 79.3, 86.0, 92.0, 97.7, 103.0, 113.5, 123.5, 133.5, 143.8, 152.8, 158.7],
                        p10: [46.8, 57.8, 63.5, 70.8, 76.8, 81.3, 88.1, 94.1, 99.9, 105.3, 115.9, 126.0, 136.2, 146.7, 155.8, 161.8],
                        p25: [48.2, 59.5, 65.2, 72.8, 78.8, 83.4, 90.3, 96.4, 102.3, 107.8, 118.7, 128.8, 139.2, 149.8, 159.0, 165.1],
                        p50: [49.1, 60.9, 66.6, 74.0, 80.0, 84.6, 91.7, 97.9, 103.9, 109.4, 120.6, 130.9, 141.5, 152.3, 161.8, 168.1],
                        p75: [50.9, 63.2, 68.8, 76.8, 82.8, 87.4, 94.6, 100.9, 106.9, 112.5, 124.0, 134.4, 145.2, 156.3, 166.0, 172.4],
                        p90: [52.0, 64.7, 70.3, 78.4, 84.7, 89.4, 96.9, 103.3, 109.4, 115.1, 126.9, 137.4, 148.4, 159.8, 169.8, 176.2],
                        p97: [53.7, 66.5, 72.1, 80.1, 86.5, 91.3, 98.9, 105.4, 111.7, 117.4, 129.5, 140.2, 151.4, 163.0, 173.4, 179.8]
                    }
                }
            },
            hk2020: {
                boy: {
                    // Hong Kong 2020 Growth Survey 2020-22 - ALL data from official CSV (87 data points)
                    // Source: HK-2020-StandardTables_v2.csv
                    ages: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 66, 72, 78, 84, 90, 96, 102, 108, 114, 120, 126, 132, 138, 144, 150, 156, 162, 168, 174, 180, 186, 192, 198, 204, 210, 216],
                    percentiles: {
                        p0_4: [45.51, 49.43, 53.26, 56.14, 58.51, 60.42, 62.09, 63.5, 64.81, 65.97, 67.06, 68.12, 69.12, 70.12, 71.08, 72.06, 73.02, 73.95, 74.89, 75.76, 76.61, 77.37, 78.08, 78.71, 79.29, 79.16, 79.69, 80.23, 80.76, 81.32, 81.89, 82.51, 83.12, 83.75, 84.4, 85.04, 85.69, 86.31, 86.93, 87.51, 88.09, 88.62, 89.13, 89.64, 90.13, 90.61, 91.07, 91.53, 91.98, 92.42, 92.87, 93.31, 93.77, 94.2, 94.65, 95.09, 95.52, 95.97, 96.4, 96.85, 97.28, 99.89, 102.56, 105.34, 108.17, 110.83, 113.21, 115.39, 117.47, 119.56, 121.75, 124.19, 126.95, 130.1, 133.71, 137.6, 141.4, 144.82, 147.62, 149.83, 151.53, 152.81, 153.78, 154.5, 155.02, 155.42, 155.73], // 0.4th percentile
                        p2: [46.51, 50.53, 54.44, 57.39, 59.82, 61.77, 63.48, 64.93, 66.28, 67.47, 68.58, 69.68, 70.7, 71.73, 72.71, 73.73, 74.71, 75.67, 76.64, 77.54, 78.41, 79.19, 79.93, 80.58, 81.18, 81.07, 81.62, 82.19, 82.73, 83.32, 83.91, 84.55, 85.18, 85.84, 86.52, 87.18, 87.86, 88.5, 89.15, 89.75, 90.35, 90.91, 91.45, 91.99, 92.49, 93.0, 93.49, 93.98, 94.45, 94.91, 95.39, 95.85, 96.33, 96.79, 97.27, 97.73, 98.19, 98.66, 99.12, 99.59, 100.04, 102.81, 105.61, 108.51, 111.47, 114.24, 116.74, 119.03, 121.25, 123.5, 125.88, 128.51, 131.48, 134.81, 138.58, 142.56, 146.41, 149.82, 152.56, 154.7, 156.32, 157.54, 158.44, 159.09, 159.54, 159.84, 160.05], // 2nd percentile
                        p9: [47.54, 51.65, 55.65, 58.67, 61.16, 63.16, 64.91, 66.4, 67.78, 69.0, 70.15, 71.27, 72.32, 73.38, 74.39, 75.44, 76.45, 77.44, 78.44, 79.36, 80.26, 81.07, 81.84, 82.51, 83.13, 83.04, 83.62, 84.2, 84.77, 85.37, 85.99, 86.65, 87.31, 87.99, 88.7, 89.39, 90.09, 90.76, 91.44, 92.07, 92.69, 93.28, 93.84, 94.4, 94.93, 95.47, 95.97, 96.49, 96.98, 97.47, 97.97, 98.46, 98.96, 99.45, 99.95, 100.43, 100.92, 101.41, 101.9, 102.39, 102.87, 105.77, 108.71, 111.75, 114.83, 117.72, 120.34, 122.77, 125.12, 127.54, 130.09, 132.91, 136.04, 139.52, 143.39, 147.43, 151.29, 154.65, 157.32, 159.38, 160.93, 162.09, 162.93, 163.52, 163.91, 164.15, 164.28], // 9th percentile
                        p25: [48.58, 52.79, 56.89, 59.98, 62.52, 64.57, 66.38, 67.9, 69.32, 70.58, 71.75, 72.91, 73.99, 75.08, 76.12, 77.2, 78.24, 79.26, 80.29, 81.24, 82.17, 83.01, 83.8, 84.5, 85.15, 85.08, 85.67, 86.28, 86.87, 87.5, 88.14, 88.83, 89.51, 90.22, 90.95, 91.67, 92.4, 93.09, 93.8, 94.45, 95.11, 95.71, 96.3, 96.89, 97.44, 98.0, 98.53, 99.07, 99.58, 100.1, 100.62, 101.13, 101.66, 102.17, 102.69, 103.2, 103.71, 104.23, 104.73, 105.25, 105.76, 108.8, 111.87, 115.04, 118.26, 121.28, 124.03, 126.59, 129.09, 131.67, 134.38, 137.36, 140.64, 144.23, 148.16, 152.21, 156.03, 159.33, 161.92, 163.89, 165.37, 166.47, 167.27, 167.82, 168.16, 168.35, 168.44], // 25th percentile
                        p50: [49.65, 53.95, 58.15, 61.31, 63.92, 66.03, 67.88, 69.44, 70.9, 72.19, 73.4, 74.59, 75.7, 76.83, 77.9, 79.01, 80.08, 81.14, 82.2, 83.19, 84.15, 85.01, 85.83, 86.55, 87.22, 87.18, 87.8, 88.43, 89.04, 89.69, 90.36, 91.07, 91.79, 92.52, 93.28, 94.02, 94.78, 95.5, 96.23, 96.91, 97.59, 98.22, 98.83, 99.45, 100.02, 100.61, 101.16, 101.72, 102.26, 102.8, 103.35, 103.88, 104.43, 104.96, 105.51, 106.04, 106.57, 107.11, 107.64, 108.18, 108.7, 111.88, 115.09, 118.39, 121.75, 124.91, 127.8, 130.51, 133.16, 135.89, 138.77, 141.89, 145.28, 148.93, 152.88, 156.9, 160.66, 163.87, 166.36, 168.24, 169.66, 170.71, 171.47, 171.98, 172.29, 172.46, 172.53], // 50th percentile
                        p75: [50.73, 55.14, 59.44, 62.68, 65.35, 67.51, 69.41, 71.02, 72.52, 73.85, 75.09, 76.32, 77.47, 78.62, 79.73, 80.88, 81.98, 83.07, 84.17, 85.19, 86.18, 87.07, 87.92, 88.67, 89.37, 89.35, 89.99, 90.64, 91.28, 91.96, 92.65, 93.39, 94.13, 94.89, 95.68, 96.45, 97.23, 97.98, 98.74, 99.45, 100.15, 100.81, 101.45, 102.08, 102.68, 103.29, 103.86, 104.45, 105.01, 105.57, 106.14, 106.69, 107.27, 107.82, 108.39, 108.94, 109.49, 110.06, 110.6, 111.17, 111.71, 115.02, 118.36, 121.8, 125.3, 128.61, 131.65, 134.51, 137.33, 140.22, 143.24, 146.48, 149.95, 153.63, 157.55, 161.52, 165.18, 168.28, 170.67, 172.46, 173.81, 174.81, 175.53, 176.02, 176.32, 176.48, 176.54], // 75th percentile
                        p91: [51.84, 56.35, 60.75, 64.07, 66.82, 69.03, 70.98, 72.64, 74.18, 75.55, 76.83, 78.09, 79.28, 80.47, 81.62, 82.8, 83.94, 85.07, 86.2, 87.25, 88.28, 89.2, 90.08, 90.86, 91.58, 91.59, 92.26, 92.94, 93.6, 94.31, 95.02, 95.79, 96.56, 97.34, 98.16, 98.96, 99.77, 100.55, 101.33, 102.07, 102.8, 103.48, 104.14, 104.8, 105.42, 106.05, 106.65, 107.25, 107.84, 108.41, 109.01, 109.58, 110.17, 110.75, 111.34, 111.91, 112.48, 113.07, 113.64, 114.22, 114.79, 118.22, 121.68, 125.27, 128.92, 132.38, 135.58, 138.62, 141.59, 144.64, 147.8, 151.14, 154.65, 158.32, 162.18, 166.06, 169.6, 172.58, 174.85, 176.55, 177.83, 178.79, 179.48, 179.96, 180.25, 180.41, 180.5], // 91st percentile
                        p98: [52.97, 57.59, 62.1, 65.5, 68.31, 70.59, 72.59, 74.29, 75.88, 77.29, 78.61, 79.92, 81.14, 82.37, 83.56, 84.78, 85.96, 87.12, 88.29, 89.38, 90.44, 91.4, 92.31, 93.11, 93.87, 93.91, 94.6, 95.3, 96.0, 96.73, 97.47, 98.27, 99.06, 99.88, 100.73, 101.55, 102.39, 103.2, 104.01, 104.77, 105.53, 106.23, 106.91, 107.6, 108.24, 108.89, 109.51, 110.14, 110.74, 111.34, 111.95, 112.54, 113.16, 113.75, 114.36, 114.95, 115.54, 116.15, 116.74, 117.34, 117.93, 121.47, 125.07, 128.79, 132.6, 136.23, 139.61, 142.82, 145.96, 149.17, 152.45, 155.86, 159.38, 163.0, 166.78, 170.52, 173.93, 176.77, 178.92, 180.52, 181.74, 182.65, 183.32, 183.79, 184.08, 184.27, 184.39], // 98th percentile
                        p99_6: [54.13, 58.85, 63.47, 66.95, 69.84, 72.18, 74.24, 75.99, 77.62, 79.08, 80.44, 81.79, 83.05, 84.33, 85.55, 86.81, 88.03, 89.24, 90.45, 91.57, 92.67, 93.67, 94.61, 95.45, 96.23, 96.3, 97.02, 97.75, 98.47, 99.23, 100.0, 100.83, 101.65, 102.5, 103.38, 104.23, 105.1, 105.93, 106.77, 107.56, 108.34, 109.07, 109.77, 110.48, 111.14, 111.82, 112.45, 113.1, 113.72, 114.34, 114.97, 115.58, 116.22, 116.83, 117.46, 118.06, 118.67, 119.3, 119.9, 120.53, 121.13, 124.79, 128.51, 132.37, 136.34, 140.16, 143.72, 147.11, 150.44, 153.8, 157.18, 160.64, 164.15, 167.69, 171.33, 174.93, 178.17, 180.86, 182.88, 184.39, 185.54, 186.41, 187.06, 187.52, 187.83, 188.05, 188.22] // 99.6th percentile
                    }
                },
                girl: {
                    // Hong Kong 2020 Growth Survey 2020-22 - ALL data from official CSV (87 data points)
                    // Source: HK-2020-StandardTables_v2.csv
                    ages: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 66, 72, 78, 84, 90, 96, 102, 108, 114, 120, 126, 132, 138, 144, 150, 156, 162, 168, 174, 180, 186, 192, 198, 204, 210, 216],
                    percentiles: {
                        p0_4: [44.98, 48.6, 52.19, 54.87, 57.11, 58.98, 60.73, 62.27, 63.74, 65.05, 66.25, 67.41, 68.46, 69.48, 70.43, 71.36, 72.22, 73.05, 73.88, 74.66, 75.43, 76.15, 76.87, 77.55, 78.21, 78.17, 78.8, 79.44, 80.05, 80.68, 81.27, 81.89, 82.48, 83.07, 83.67, 84.24, 84.83, 85.38, 85.95, 86.49, 87.04, 87.56, 88.08, 88.6, 89.1, 89.62, 90.11, 90.62, 91.1, 91.59, 92.09, 92.58, 93.08, 93.57, 94.07, 94.55, 95.03, 95.52, 96.0, 96.49, 96.96, 99.78, 102.51, 105.15, 107.74, 110.26, 112.77, 115.33, 118.0, 120.82, 123.76, 126.83, 129.89, 132.73, 135.19, 137.22, 138.92, 140.39, 141.65, 142.69, 143.53, 144.19, 144.71, 145.13, 145.47, 145.74, 145.92], // 0.4th percentile
                        p2: [45.95, 49.65, 53.33, 56.07, 58.36, 60.28, 62.06, 63.65, 65.15, 66.49, 67.73, 68.91, 69.99, 71.04, 72.01, 72.96, 73.85, 74.71, 75.56, 76.36, 77.15, 77.9, 78.64, 79.34, 80.02, 80.01, 80.66, 81.32, 81.95, 82.59, 83.21, 83.85, 84.46, 85.07, 85.7, 86.29, 86.9, 87.48, 88.07, 88.63, 89.2, 89.75, 90.28, 90.83, 91.35, 91.89, 92.41, 92.94, 93.45, 93.96, 94.48, 94.99, 95.52, 96.03, 96.55, 97.06, 97.56, 98.08, 98.58, 99.09, 99.59, 102.54, 105.39, 108.13, 110.81, 113.43, 116.03, 118.7, 121.49, 124.47, 127.57, 130.81, 134.04, 137.01, 139.54, 141.58, 143.23, 144.62, 145.79, 146.73, 147.48, 148.06, 148.52, 148.87, 149.13, 149.32, 149.42], // 2nd percentile
                        p9: [46.93, 50.72, 54.47, 57.28, 59.62, 61.59, 63.42, 65.04, 66.58, 67.95, 69.22, 70.44, 71.54, 72.62, 73.61, 74.6, 75.51, 76.39, 77.27, 78.09, 78.91, 79.68, 80.45, 81.17, 81.87, 81.88, 82.55, 83.24, 83.89, 84.56, 85.2, 85.86, 86.5, 87.13, 87.77, 88.39, 89.02, 89.62, 90.24, 90.82, 91.42, 91.98, 92.54, 93.11, 93.66, 94.22, 94.76, 95.31, 95.85, 96.38, 96.93, 97.46, 98.01, 98.54, 99.09, 99.62, 100.14, 100.68, 101.21, 101.74, 102.26, 105.35, 108.32, 111.17, 113.96, 116.67, 119.38, 122.17, 125.1, 128.23, 131.5, 134.92, 138.3, 141.37, 143.94, 145.95, 147.54, 148.83, 149.88, 150.72, 151.38, 151.9, 152.29, 152.59, 152.8, 152.92, 152.96], // 9th percentile
                        p25: [47.92, 51.79, 55.63, 58.5, 60.9, 62.91, 64.78, 66.44, 68.02, 69.43, 70.74, 71.99, 73.12, 74.23, 75.25, 76.26, 77.21, 78.11, 79.02, 79.87, 80.71, 81.5, 82.3, 83.04, 83.77, 83.8, 84.49, 85.2, 85.88, 86.57, 87.23, 87.92, 88.58, 89.23, 89.9, 90.54, 91.2, 91.82, 92.46, 93.07, 93.69, 94.28, 94.86, 95.45, 96.02, 96.6, 97.16, 97.74, 98.3, 98.85, 99.43, 99.98, 100.55, 101.11, 101.68, 102.23, 102.78, 103.34, 103.89, 104.45, 104.99, 108.21, 111.3, 114.27, 117.17, 120.0, 122.83, 125.75, 128.83, 132.13, 135.57, 139.15, 142.66, 145.81, 148.38, 150.34, 151.82, 153.0, 153.94, 154.67, 155.25, 155.7, 156.04, 156.3, 156.46, 156.54, 156.54], // 25th percentile
                        p50: [48.92, 52.87, 56.8, 59.73, 62.19, 64.25, 66.17, 67.87, 69.49, 70.94, 72.28, 73.56, 74.73, 75.87, 76.92, 77.96, 78.93, 79.87, 80.8, 81.68, 82.55, 83.37, 84.19, 84.95, 85.7, 85.76, 86.48, 87.21, 87.91, 88.63, 89.32, 90.03, 90.71, 91.39, 92.08, 92.75, 93.43, 94.08, 94.74, 95.37, 96.01, 96.62, 97.23, 97.85, 98.44, 99.04, 99.63, 100.23, 100.8, 101.38, 101.98, 102.56, 103.15, 103.73, 104.32, 104.9, 105.47, 106.06, 106.62, 107.21, 107.77, 111.12, 114.34, 117.43, 120.45, 123.41, 126.38, 129.44, 132.68, 136.16, 139.77, 143.5, 147.12, 150.32, 152.86, 154.74, 156.1, 157.14, 157.95, 158.58, 159.08, 159.47, 159.77, 159.99, 160.12, 160.18, 160.16], // 50th percentile
                        p75: [49.92, 53.96, 57.98, 60.98, 63.49, 65.6, 67.57, 69.32, 70.98, 72.47, 73.84, 75.16, 76.36, 77.54, 78.62, 79.69, 80.69, 81.66, 82.62, 83.52, 84.42, 85.27, 86.12, 86.91, 87.69, 87.77, 88.52, 89.27, 90.0, 90.74, 91.46, 92.19, 92.9, 93.6, 94.32, 95.01, 95.71, 96.39, 97.07, 97.73, 98.39, 99.03, 99.66, 100.3, 100.91, 101.54, 102.15, 102.77, 103.37, 103.97, 104.59, 105.19, 105.81, 106.4, 107.02, 107.62, 108.21, 108.82, 109.41, 110.02, 110.6, 114.08, 117.43, 120.65, 123.81, 126.9, 130.02, 133.25, 136.67, 140.32, 144.1, 147.98, 151.69, 154.9, 157.39, 159.15, 160.37, 161.25, 161.93, 162.45, 162.87, 163.21, 163.47, 163.67, 163.79, 163.84, 163.82], // 75th percentile
                        p91: [50.93, 55.06, 59.17, 62.24, 64.81, 66.98, 68.99, 70.79, 72.49, 74.02, 75.43, 76.79, 78.02, 79.23, 80.35, 81.45, 82.48, 83.48, 84.48, 85.41, 86.34, 87.21, 88.09, 88.91, 89.71, 89.83, 90.6, 91.38, 92.13, 92.9, 93.65, 94.41, 95.14, 95.87, 96.61, 97.33, 98.06, 98.76, 99.47, 100.14, 100.83, 101.49, 102.14, 102.81, 103.44, 104.1, 104.72, 105.37, 105.99, 106.61, 107.25, 107.88, 108.52, 109.14, 109.78, 110.39, 111.01, 111.64, 112.25, 112.88, 113.48, 117.09, 120.58, 123.93, 127.23, 130.48, 133.77, 137.18, 140.79, 144.63, 148.58, 152.58, 156.36, 159.56, 161.96, 163.57, 164.62, 165.34, 165.88, 166.29, 166.63, 166.92, 167.15, 167.33, 167.46, 167.52, 167.52], // 91st percentile
                        p98: [51.95, 56.17, 60.37, 63.51, 66.15, 68.36, 70.43, 72.27, 74.02, 75.59, 77.04, 78.44, 79.71, 80.96, 82.11, 83.25, 84.31, 85.34, 86.37, 87.33, 88.3, 89.2, 90.11, 90.96, 91.79, 91.93, 92.73, 93.54, 94.32, 95.12, 95.89, 96.68, 97.44, 98.19, 98.96, 99.7, 100.46, 101.18, 101.92, 102.62, 103.34, 104.02, 104.69, 105.38, 106.04, 106.71, 107.36, 108.03, 108.67, 109.32, 109.98, 110.62, 111.29, 111.93, 112.59, 113.23, 113.86, 114.52, 115.15, 115.8, 116.42, 120.16, 123.78, 127.28, 130.73, 134.15, 137.63, 141.24, 145.05, 149.09, 153.21, 157.33, 161.14, 164.3, 166.57, 168.01, 168.87, 169.4, 169.79, 170.09, 170.36, 170.6, 170.81, 170.99, 171.12, 171.22, 171.26], // 98th percentile
                        p99_6: [52.98, 57.29, 61.58, 64.8, 67.5, 69.77, 71.89, 73.78, 75.57, 77.18, 78.68, 80.12, 81.43, 82.71, 83.9, 85.07, 86.17, 87.24, 88.3, 89.3, 90.29, 91.23, 92.17, 93.05, 93.91, 94.09, 94.91, 95.76, 96.56, 97.39, 98.19, 99.0, 99.79, 100.57, 101.37, 102.14, 102.92, 103.67, 104.43, 105.16, 105.9, 106.6, 107.3, 108.01, 108.69, 109.39, 110.06, 110.75, 111.41, 112.08, 112.76, 113.43, 114.11, 114.77, 115.46, 116.12, 116.77, 117.45, 118.1, 118.77, 119.42, 123.29, 127.04, 130.69, 134.31, 137.91, 141.59, 145.42, 149.46, 153.7, 157.99, 162.21, 166.03, 169.11, 171.23, 172.46, 173.1, 173.44, 173.67, 173.85, 174.05, 174.25, 174.45, 174.63, 174.79, 174.93, 175.04] // 99.6th percentile
                    }
                }
            }
        };

        function initChart() {
            const ctx = document.getElementById('growthChart').getContext('2d');
            
            chart = new Chart(ctx, {
                type: 'line',
                data: {
                    datasets: []
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: {
                            type: 'linear',
                            position: 'bottom',
                            title: {
                                display: true,
                                text: 'Age (years)'
                            },
                            min: 0,
                            max: 18
                        },
                        y: {
                            title: {
                                display: true,
                                text: 'Height (cm)'
                            },
                            min: 40,
                            max: 200
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            mode: 'nearest',
                            enable: true,
                            intersect: false,
                            backgroundColor: 'rgba(0, 0, 0, 0.8)',
                            titleColor: 'white',
                            bodyColor: 'white',
                            borderColor: 'rgba(255, 255, 255, 0.3)',
                            borderWidth: 1,
                            cornerRadius: 6,
                            displayColors: true,
                            callbacks: {
                                title: function(context) {
                                    const ageYears = context[0].parsed.x;
                                    return `Age: ${ageYears} years`;
                                },
                                label: function(context) {
                                    const height = context.parsed.y;
                                    const datasetLabel = context.dataset.label;
                                    
                                    // Don't show tooltip for user's plotted point
                                    if (datasetLabel === 'Your Child') {
                                        return `${datasetLabel}: ${height} cm`;
                                    }
                                    
                                    return `${datasetLabel}: ${height} cm`;
                                },
                                afterLabel: function(context) {
                                    const datasetLabel = context.dataset.label;
                                    if (datasetLabel === 'Your Child') {
                                        return 'Your child\'s measurement';
                                    }
                                    return 'Growth percentile curve';
                                }
                            }
                        }
                    },
                    elements: {
                        point: {
                            radius: 0,
                            hoverRadius: 6,
                            hoverBorderWidth: 2
                        },
                        line: {
                            borderWidth: 2,
                            hoverBorderWidth: 3
                        }
                    },
                    interaction: {
                        intersect: false,
                        mode: 'nearest'
                    }
                }
            });
            
            updateChart();
        }

        function updateLegend() {
            const standard = document.getElementById('standard').value;
            const legendDiv = document.getElementById('legend');
            
            const legendData = standard === 'who_cdc' ? {
                'p3': { color: '#ff6b6b', label: '3rd Percentile' },
                'p10': { color: '#feca57', label: '10th Percentile' },
                'p25': { color: '#48dbfb', label: '25th Percentile' },
                'p50': { color: '#0abde3', label: '50th Percentile (Median)' },
                'p75': { color: '#48dbfb', label: '75th Percentile' },
                'p90': { color: '#feca57', label: '90th Percentile' },
                'p97': { color: '#ff6b6b', label: '97th Percentile' }
            } : {
                'p0_4': { color: '#d63031', label: '0.4th Percentile' },
                'p2': { color: '#e17055', label: '2nd Percentile' },
                'p9': { color: '#fdcb6e', label: '9th Percentile' },
                'p25': { color: '#74b9ff', label: '25th Percentile' },
                'p50': { color: '#0984e3', label: '50th Percentile (Median)' },
                'p75': { color: '#6c5ce7', label: '75th Percentile' },
                'p91': { color: '#a29bfe', label: '91st Percentile' },
                'p98': { color: '#fd79a8', label: '98th Percentile' },
                'p99_6': { color: '#e84393', label: '99.6th Percentile' }
            };
            
            legendDiv.innerHTML = '';
            Object.entries(legendData).forEach(([key, data]) => {
                const legendItem = document.createElement('div');
                legendItem.className = 'legend-item';
                legendItem.innerHTML = `
                    <div class="legend-color" style="background-color: ${data.color};"></div>
                    <span>${data.label}</span>
                `;
                legendDiv.appendChild(legendItem);
            });
        }

        function updateChart() {
            const standard = document.getElementById('standard').value;
            const gender = document.getElementById('gender').value;
            const data = growthData[standard][gender];
            
            const colors = standard === 'who_cdc' ? {
                p3: '#ff6b6b',
                p10: '#feca57',
                p25: '#48dbfb',
                p50: '#0abde3',
                p75: '#48dbfb',
                p90: '#feca57',
                p97: '#ff6b6b'
            } : {
                p0_4: '#d63031',
                p2: '#e17055',
                p9: '#fdcb6e',
                p25: '#74b9ff',
                p50: '#0984e3',
                p75: '#6c5ce7',
                p91: '#a29bfe',
                p98: '#fd79a8',
                p99_6: '#e84393'
            };

            chart.data.datasets = [];
            
            // Add percentile lines
            Object.keys(data.percentiles).forEach(percentile => {
                const percentileData = data.ages.map((age, index) => ({
                    x: age / 12, // Convert months to years for display
                    y: data.percentiles[percentile][index]
                }));
                
                let label = percentile.replace('p', '').replace('_', '.') + 'th Percentile';
                if (percentile === 'p50') label += ' (Median)';
                
                chart.data.datasets.push({
                    label: label,
                    data: percentileData,
                    borderColor: colors[percentile],
                    backgroundColor: colors[percentile],
                    borderWidth: percentile === 'p50' ? 3 : 2,
                    fill: false,
                    tension: 0.4
                });
            });
            
            // Add user data point if exists (ensure it's on top)
            if (userDataPoint) {
                chart.data.datasets.push({
                    label: 'Your Child',
                    data: [userDataPoint],
                    backgroundColor: '#ff3838',
                    borderColor: '#ff3838',
                    borderWidth: 3,
                    pointRadius: 5,
                    pointHoverRadius: 7,
                    pointStyle: 'cross',
                    pointRotation: 45,
                    showLine: false,
                    order: -1, // Ensures this dataset is rendered on top
                    zIndex: 1000 // Additional z-index for visibility
                });
            }
            
            updateLegend();
            chart.update();
        }

        function plotPoint() {
            const standard = document.getElementById('standard').value;
            const gender = document.getElementById('gender').value;
            const ageYears = parseFloat(document.getElementById('age').value);
            const height = parseFloat(document.getElementById('height').value);
            const infoDiv = document.getElementById('info');
            
            // Validation
            if (isNaN(ageYears) || isNaN(height)) {
                showInfo('Please enter valid numbers for age and height.', 'error');
                return;
            }
            
            if (ageYears < 0 || ageYears > 18) {
                showInfo('Age must be between 0 and 18 years.', 'error');
                return;
            }
            
            if (height < 30 || height > 200) {
                showInfo('Height must be between 30 and 200 cm.', 'error');
                return;
            }
            
            // Convert years to months for calculations
            const ageMonths = ageYears * 12;
            
            // Create user data point (display in years)
            userDataPoint = { x: ageYears, y: height };
            
            // Calculate percentile (using months)
            const percentile = calculatePercentile(standard, gender, ageMonths, height);
            
            // Update chart
            updateChart();
            
            // Show info
            const standardName = standard === 'who_cdc' ? 'WHO/CDC' : 'Hong Kong 2020';
            showInfo(`Plotted: ${gender === 'boy' ? 'Boy' : 'Girl'}, ${ageYears} years old, ${height} cm tall. Approximately ${percentile} percentile (${standardName} standard).`);
        }

        function calculatePercentile(standard, gender, ageMonths, height) {
            const data = growthData[standard][gender];
            
            // Find the closest age points for interpolation
            let lowerIndex = 0;
            let upperIndex = data.ages.length - 1;
            
            for (let i = 0; i < data.ages.length - 1; i++) {
                if (ageMonths >= data.ages[i] && ageMonths <= data.ages[i + 1]) {
                    lowerIndex = i;
                    upperIndex = i + 1;
                    break;
                }
            }
            
            // Interpolate percentile values for the given age
            const ageFactor = upperIndex === lowerIndex ? 0 : (ageMonths - data.ages[lowerIndex]) / (data.ages[upperIndex] - data.ages[lowerIndex]);
            
            // Different percentile structures for different standards
            const percentiles = standard === 'who_cdc' 
                ? ['p3', 'p10', 'p25', 'p50', 'p75', 'p90', 'p97']
                : ['p0_4', 'p2', 'p9', 'p25', 'p50', 'p75', 'p91', 'p98', 'p99_6'];
            
            const percentileValues = standard === 'who_cdc'
                ? [3, 10, 25, 50, 75, 90, 97]
                : [0.4, 2, 9, 25, 50, 75, 91, 98, 99.6];
            
            for (let i = 0; i < percentiles.length; i++) {
                const lowerHeight = data.percentiles[percentiles[i]][lowerIndex];
                const upperHeight = data.percentiles[percentiles[i]][upperIndex];
                const interpolatedHeight = lowerHeight + ageFactor * (upperHeight - lowerHeight);
                
                if (height <= interpolatedHeight) {
                    if (i === 0) return `<${percentileValues[i]}th`;
                    
                    // Interpolate between this and previous percentile
                    const prevPercentile = percentiles[i - 1];
                    const prevLowerHeight = data.percentiles[prevPercentile][lowerIndex];
                    const prevUpperHeight = data.percentiles[prevPercentile][upperIndex];
                    const prevInterpolatedHeight = prevLowerHeight + ageFactor * (prevUpperHeight - prevLowerHeight);
                    
                    const heightFactor = (height - prevInterpolatedHeight) / (interpolatedHeight - prevInterpolatedHeight);
                    const estimatedPercentile = percentileValues[i - 1] + heightFactor * (percentileValues[i] - percentileValues[i - 1]);
                    
                    return `${Math.round(estimatedPercentile * 10) / 10}th`;
                }
            }
            
            return standard === 'who_cdc' ? '>97th' : '>99.6th';
        }

        function showInfo(message, type = 'info') {
            const infoDiv = document.getElementById('info');
            infoDiv.textContent = message;
            infoDiv.className = 'info-box' + (type === 'error' ? ' error' : '');
            infoDiv.style.display = 'block';
        }

        // Initialize chart when page loads
        document.addEventListener('DOMContentLoaded', function() {
            initChart();
            updateLegend(); // Set initial legend
            
            // Update chart when standard or gender changes
            document.getElementById('standard').addEventListener('change', updateChart);
            document.getElementById('gender').addEventListener('change', updateChart);
        });
    </script>
</body>
</html> 